<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title> My Portfolio : Sonu Kumar Jha </title>
  <link rel="icon" href="./resources/images/profile.png" type="image/x-icon">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js">
  </script>
  <link rel="stylesheet" href="./style.css">
  <link rel="stylesheet" href="./resources/css/my_style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css">
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
</head>

<body>
  <center>
    <!-- Header Starts -->
    <header class="header">
      <nav class="navbar navbar-expand-sm navbar-light">
        <div class="container" style="background-color: beige; border-radius: 10px; height: 60px;">
          <a class="navbar-brand" href="./index.html"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
              viewBox="0 0 24 24">
              <path fill="currentColor"
                d="M15.71 12.71a6 6 0 1 0-7.42 0a10 10 0 0 0-6.22 8.18a1 1 0 0 0 2 .22a8 8 0 0 1 15.9 0a1 1 0 0 0 1 .89h.11a1 1 0 0 0 .88-1.1a10 10 0 0 0-6.25-8.19M12 12a4 4 0 1 1 4-4a4 4 0 0 1-4 4" />
            </svg> Sonu Jha</a>

          <button class="navbar-toggler" id="nav-toog" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mx-auto">
              <li class="nav-item">
                <a href="./index.html" class="nav-link"><span data-hover="About">About</span></a>
              </li>
              <li class="nav-item">
                <a href="./projects.html" class="nav-link"><span data-hover="Projects">Projects</span></a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                  aria-expanded="false">
                  Profiles
                </a>
                <ul class="dropdown-menu" style="background-color: whitesmoke; border-radius: 7px;">
                  <li><a class="dropdown-item" href="https://www.linkedin.com/in/sonu-jha-633765167/">Linked In</a></li>
                  <li><a class="dropdown-item" href="https://www.facebook.com/sonukumar.jha.927980">Facebook</a></li>
                  <li>
                    <hr class="dropdown-divider">
                  </li>
                  <!-- <li><a class="dropdown-item" href="#"></a></li> -->
                </ul>
              </li>
              <li class="nav-item">
                <a href="./contact.html" class="nav-link"><span data-hover="Contact">Contact</span></a>
              </li>
              <li class="nav-item"
                style="background-color: blue; width: auto; border: none; border-radius: 10px; height: 40px;">
                <a href="https://firebasestorage.googleapis.com/v0/b/myportfolio-bb8f2.appspot.com/o/myfiles%2FResume.pdf?alt=media&token=099c6e3f-b0ac-49e2-bd57-895415778914"
                  class="nav-link"><span data-hover="Resume" style="color: white;"
                    download="sonujhaResume.pdf">Resume</span></a>
              </li>
            </ul>

            <ul class="navbar-nav ml-lg-auto">
              <div class="ml-lg-4">
                <div class="color-mode d-lg-flex justify-content-center align-items-center">
                  <button id="dark-mode-toggle" class="my_dark_mode">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                      <defs>
                        <mask id="lineMdLightDark0">
                          <circle cx="7.5" cy="7.5" r="5.5" fill="#fff" />
                          <circle cx="7.5" cy="7.5" r="5.5">
                            <animate fill="freeze" attributeName="cx" dur="0.4s" values="7.5;11" />
                            <animate fill="freeze" attributeName="r" dur="0.4s" values="5.5;6.5" />
                          </circle>
                        </mask>
                        <mask id="lineMdLightDark1">
                          <g fill="#fff">
                            <circle cx="12" cy="9" r="5.5">
                              <animate fill="freeze" attributeName="cy" begin="1s" dur="0.5s" values="9;15" />
                            </circle>
                            <g fill-opacity="0">
                              <use href="#lineMdLightDark2" transform="rotate(-75 12 15)" />
                              <use href="#lineMdLightDark2" transform="rotate(-25 12 15)" />
                              <use href="#lineMdLightDark2" transform="rotate(25 12 15)" />
                              <use href="#lineMdLightDark2" transform="rotate(75 12 15)" />
                              <set attributeName="fill-opacity" begin="1.5s" to="1" />
                            </g>
                          </g>
                          <path d="M0 10h26v5h-26z" />
                          <path fill="none" stroke="#fff" stroke-dasharray="26" stroke-dashoffset="26"
                            stroke-linecap="round" stroke-width="2" d="M1 12h22">
                            <animate fill="freeze" attributeName="stroke-dashoffset" begin="0.5s" dur="0.4s"
                              values="26;52" />
                          </path>
                        </mask>
                        <symbol id="lineMdLightDark2">
                          <path d="M0 0">
                            <animate fill="freeze" attributeName="d" begin="1.5s" dur="0.4s"
                              values="M11 18h2L12 20z;M10.5 21.5h3L12 24z" />
                          </path>
                        </symbol>
                      </defs>
                      <g fill="currentColor">
                        <rect width="13" height="13" x="1" y="1" mask="url(#lineMdLightDark0)" />
                        <path d="M-2 11h28v13h-28z" mask="url(#lineMdLightDark1)" transform="rotate(-45 12 12)" />
                      </g>
                    </svg>
                  </button>
                </div>
              </div>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <!-- Header Ends -->

    <main id="main" style="padding-top: 10px;">
      <form class="container" id="contactForm" hidden>
        <hr>
        <h2 class="text-primary" style="margin-left: 15px; margin-bottom: 10px">
          For Admin Only : Add Project
        </h2>
        <div class="" style="border-radius: 10px;">
          <div class="card-body">
            <div class="form-group">
              <label for="exampleFormControlInput1">
                Project Name
              </label>

              <input type="text" class="form-control" id="name" placeholder="Enter Project name">
            </div>
            <label for="exampleFormControlInput1">
              Project Link
            </label>

            <input type="text" class="form-control" id="link" placeholder="Enter Project Link">
          </div>
          <div class="form-group">
            <label for="exampleFormControlInput1">
              Project Image
            </label>

            <input type="file" class="form-control" id="files ">
          </div>
          <div class="form-group">
            <label for="exampleFormControlInput1">
              Project Description
            </label>

            <textarea name="textArea" class="form-control" rows="2" id="description"
              placeholder="Please enter the project description"></textarea>
          </div>
        </div>
        <button type="submit" id="url" class="btn btn-primary" style="margin-left: 15px; margin-top: 10px">
          Submit
        </button>
        <hr>
        </div>
      </form>
      <div
        style="font-size: x-large; font-weight: 600; border-radius: 10px; background-color: skyblue; display: inline; padding: 10px; color: whitesmoke;">
        My Projects
      </div>
      <div class="outerForProject">
        <button class="callToAddProject" onclick="showForm()" style="font-size: x-large; font-weight: 600px;">+</button>
      </div>
      <div id="answer" style="margin-top: 20px;"></div>
    </main>
  </center>
  <script src="./resources/js/my_js.js"></script>
  <script src="https://www.gstatic.com/firebasejs/3.7.4/firebase.js">
  </script>
  <script>
    function signInCustom() {
      var token = "token123";
      // [START auth_sign_in_custom]
      firebase.auth().signInWithCustomToken(token)
        .then((userCredential) => {
          // Signed in
          var user = userCredential.user;
          // ...
        })
        .catch((error) => {
          var errorCode = error.code;
          var errorMessage = error.message;
          // ...
        });
      // [END auth_sign_in_custom]
    }
    let firebaseConfig = {
      apiKey: "AIzaSyCPNWRvTubjG5WXsT4pGsj9Jga-bh2XEZ0",
      authDomain: "myportfolio-bb8f2.firebaseapp.com",
      projectId: "myportfolio-bb8f2",
      storageBucket: "myportfolio-bb8f2.appspot.com",
      messagingSenderId: "266363657887",
      appId: "1:266363657887:web:00fc9f76f5ae234e4e8caa",
      measurementId: "G-4VX5CK9ZWP",
      databaseURL: "https://myportfolio-bb8f2-default-rtdb.firebaseio.com/"
    };

    firebase.initializeApp(firebaseConfig);

    let messagesRef = firebase.database()
      .ref('Contact Data');

    document.getElementById('contactForm')
      .addEventListener('submit', submitForm);

    function submitForm(e) {
      e.preventDefault();
      var type = "1";
      var storage = firebase.storage();
      var file = document.getElementById("files ").files[0];
      var storageref = storage.ref();
      var thisref = storageref.child(type).child(file.name).put(file);
      thisref.on('state_changed', function (snapshot) {


      }, function (error) {

      }, function () {
        // Uploaded completed successfully, now we can get the download URL
        thisref.snapshot.ref.getDownloadURL().then(function (downloadURL) {
          //getting url of image
          document.getElementById("url").value = downloadURL;
          let name = getInputVal('name');
          let description = getInputVal('description');
          let link = getInputVal('link');
          console.log(downloadURL, name)
          saveMessage(downloadURL, name, description, link);
          alert('uploaded successfully');
        });
      });
      var url = getInputVal('files ');
    }


    function getInputVal(id) {
      return document.getElementById(id).value;
    }

    // Save message to firebase
    function saveMessage(url, name, description, link) {
      let newMessageRef = messagesRef.push();
      newMessageRef.set({
        name: name,
        url: url,
        description: description,
        projectLink: link
      });
      console.log("Done")
      window.location.reload();
    }
    messagesRef.on('value', function (snap) {
      document.getElementById("answer").innerHTML = "";
      //gets values for each element in data set
      var count = 0;
      snap.forEach(function (child) {
        var childData = child.val();
        var names = childData.name;
        var description = childData.description;
        var url = childData.url;
        var projectLink = childData.projectLink;
        document.getElementById("answer").innerHTML +=
          `<div class="row d-inline-block">
          <div class="col-sm-6 mb-3 mb-sm-0">
            <div class="">
              <div class="card-body">
                <h5 class="card-title">`+ names + `</h5>
                <p class="card-text">`+ description + `</p>
                <div style="margin: 10px;">
                  <img src="`+ url + `" alt="Rest API" height=100px width:100px>
                </div>
                <a href="`+ projectLink + `" target="_blank"
                  class="btn btn-primary">Search
                  Link</a>
              </div>
            </div>
          </div >
        </div>`;
        if (count % 2 != 0) {
          document.getElementById("answer").innerHTML += "<hr>"
        }
        count += 1;
      });
    });
  </script>
</body>

</html>